<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="设计模式（Java为例）学习笔记"><meta name="keywords" content="设计模式,UML类图,设计原则"><meta name="author" content="wnxy"><meta name="copyright" content="wnxy"><title>设计模式（Java为例）学习笔记 | Wnxy's Blog</title><link rel="shortcut icon" href="/melody-favicon2.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://unpkg.com/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: 'ca-pub-5336716665297879',
  enable_page_level_ads: 'true'
});
</script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8e5307dee6403f62f804e355d883fb17";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Wnxy's Blog" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#一、UML类图"><span class="toc-number">1.</span> <span class="toc-text">一、UML类图</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、依赖"><span class="toc-number">1.1.</span> <span class="toc-text">1、依赖</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、关联"><span class="toc-number">1.2.</span> <span class="toc-text">2、关联</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、泛化"><span class="toc-number">1.3.</span> <span class="toc-text">3、泛化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、实现"><span class="toc-number">1.4.</span> <span class="toc-text">4、实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、聚合"><span class="toc-number">1.5.</span> <span class="toc-text">5、聚合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、组合"><span class="toc-number">1.6.</span> <span class="toc-text">6、组合</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二、设计原则"><span class="toc-number">2.</span> <span class="toc-text">二、设计原则</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、单一职责原则"><span class="toc-number">2.1.</span> <span class="toc-text">1、单一职责原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、接口隔离原则"><span class="toc-number">2.2.</span> <span class="toc-text">2、接口隔离原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、依赖倒转原则"><span class="toc-number">2.3.</span> <span class="toc-text">3、依赖倒转原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、里氏替换原则"><span class="toc-number">2.4.</span> <span class="toc-text">4、里氏替换原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、开闭原则"><span class="toc-number">2.5.</span> <span class="toc-text">5、开闭原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、迪米特法则（最小知道原则）"><span class="toc-number">2.6.</span> <span class="toc-text">6、迪米特法则（最小知道原则）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、合成复用原则"><span class="toc-number">2.7.</span> <span class="toc-text">7、合成复用原则</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三、设计模式"><span class="toc-number">3.</span> <span class="toc-text">三、设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1、创建型模式"><span class="toc-number">3.1.</span> <span class="toc-text">1、创建型模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-单例模式"><span class="toc-number">3.1.1.</span> <span class="toc-text">1.1 单例模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1-饿汉式（静态常量）"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">1.1.1 饿汉式（静态常量）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2-饿汉式（静态代码块）"><span class="toc-number">3.1.1.2.</span> <span class="toc-text">1.1.2 饿汉式（静态代码块）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-3-懒汉式（线程不安全）"><span class="toc-number">3.1.1.3.</span> <span class="toc-text">1.1.3 懒汉式（线程不安全）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-4-懒汉式（线程安全，同步方法）"><span class="toc-number">3.1.1.4.</span> <span class="toc-text">1.1.4 懒汉式（线程安全，同步方法）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-5-懒汉式（双重检查）推荐"><span class="toc-number">3.1.1.5.</span> <span class="toc-text">1.1.5 懒汉式（双重检查）推荐</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-6-懒汉式（静态内部类）推荐"><span class="toc-number">3.1.1.6.</span> <span class="toc-text">1.1.6 懒汉式（静态内部类）推荐</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-7-懒汉式（枚举）推荐"><span class="toc-number">3.1.1.7.</span> <span class="toc-text">1.1.7 懒汉式（枚举）推荐</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-工厂模式"><span class="toc-number">3.1.2.</span> <span class="toc-text">1.2 工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-简单工厂模式"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">1.2.1 简单工厂模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-工厂方法模式"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">1.2.2 工厂方法模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-3-抽象工厂模式"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">1.2.3 抽象工厂模式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-原型模式"><span class="toc-number">3.1.3.</span> <span class="toc-text">1.3 原型模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-建造者模式"><span class="toc-number">3.1.4.</span> <span class="toc-text">1.4 建造者模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、结构型模式"><span class="toc-number">3.2.</span> <span class="toc-text">2、结构型模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-适配器模式"><span class="toc-number">3.2.1.</span> <span class="toc-text">2.1 适配器模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-桥接模式"><span class="toc-number">3.2.2.</span> <span class="toc-text">2.2 桥接模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-装饰者模式（-）"><span class="toc-number">3.2.3.</span> <span class="toc-text">2.3 装饰者模式（*）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-组合模式"><span class="toc-number">3.2.4.</span> <span class="toc-text">2.4 组合模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-外观模式"><span class="toc-number">3.2.5.</span> <span class="toc-text">2.5 外观模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-享元模式"><span class="toc-number">3.2.6.</span> <span class="toc-text">2.6 享元模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-应用场景："><span class="toc-number">3.2.6.1.</span> <span class="toc-text">2.6.1 应用场景：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-代理模式"><span class="toc-number">3.2.7.</span> <span class="toc-text">2.7 代理模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-1-应用场景"><span class="toc-number">3.2.7.1.</span> <span class="toc-text">2.7.1 应用场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-2-注意事项"><span class="toc-number">3.2.7.2.</span> <span class="toc-text">2.7.2 注意事项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、行为型模式"><span class="toc-number">3.3.</span> <span class="toc-text">3、行为型模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-模板方法模式"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.1 模板方法模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1-应用场景"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">3.1.1 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-命令模式"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.2 命令模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-应用场景"><span class="toc-number">3.3.2.1.</span> <span class="toc-text">3.2.1 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-访问者模式"><span class="toc-number">3.3.3.</span> <span class="toc-text">3.3 访问者模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-迭代器模式"><span class="toc-number">3.3.4.</span> <span class="toc-text">3.4 迭代器模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-观察者模式"><span class="toc-number">3.3.5.</span> <span class="toc-text">3.5 观察者模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-1-应用场景"><span class="toc-number">3.3.5.1.</span> <span class="toc-text">3.5.1 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-中介者模式"><span class="toc-number">3.3.6.</span> <span class="toc-text">3.6 中介者模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-1-应用场景"><span class="toc-number">3.3.6.1.</span> <span class="toc-text">3.6.1 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-备忘录模式"><span class="toc-number">3.3.7.</span> <span class="toc-text">3.7 备忘录模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-1-应用场景"><span class="toc-number">3.3.7.1.</span> <span class="toc-text">3.7.1 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-解释器模式"><span class="toc-number">3.3.8.</span> <span class="toc-text">3.8 解释器模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-1-应用场景"><span class="toc-number">3.3.8.1.</span> <span class="toc-text">3.8.1 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-9-状态模式"><span class="toc-number">3.3.9.</span> <span class="toc-text">3.9 状态模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-10-策略模式"><span class="toc-number">3.3.10.</span> <span class="toc-text">3.10 策略模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-10-1-应用场景"><span class="toc-number">3.3.10.1.</span> <span class="toc-text">3.10.1 应用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-职责链模式"><span class="toc-number">3.3.11.</span> <span class="toc-text">3.11 职责链模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-11-1-应用场景"><span class="toc-number">3.3.11.1.</span> <span class="toc-text">3.11.1 应用场景</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s1.ax1x.com/2020/09/19/w5744e.jpg"></div><div class="author-info__name text-center">wnxy</div><div class="author-info__description text-center">愿一切美好都能如约而至，喜欢的都能拥有</div><div class="follow-button"><a href="https://github.com/wnxy" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">56</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">101</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">11</span></a></div><hr><div class="twopeople"><div class="container" style="height:200px;"><canvas class="illo" width="800" height="800" style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;">      </canvas><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople1.js">     </script><script src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/zdog.dist.js">      </script><script id="rendered-js" src="https://cdn.jsdelivr.net/gh/Justlovesmile/CDN/js/twopeople.js">      </script><style>.twopeople{
margin: 0;
align-items: center;
justify-content: center;
text-align: center;
}
canvas {
display: block;
margin: 0 auto;
cursor: move;
}</style></div></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature&amp;return=302)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Wnxy's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/message">Message</a><a class="site-page" href="/links">Links</a><a class="site-page" href="/about">About</a><a class="site-page" href="/interest">Interest</a><a class="site-page" href="/clover">Clover</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">设计模式（Java为例）学习笔记</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> created 2024-01-07<span class="post-meta__separator">|</span><i class="fa fa-calendar-check-o" aria-hidden="true"></i> updated 2024-01-07</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E4%B8%8E%E9%87%8D%E6%9E%84/">软件设计与重构</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2024/01/07/Design_pattern_study_notes/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2024/01/07/Design_pattern_study_notes/"></span></a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">4.9k</span><span class="post-meta__separator">|</span><span>Reading time: 15 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="一、UML类图"><a href="#一、UML类图" class="headerlink" title="一、UML类图"></a>一、UML类图</h1><h2 id="1、依赖"><a href="#1、依赖" class="headerlink" title="1、依赖"></a>1、依赖</h2><p>【依赖关系】：是一种使用的关系，即一个类的实现需要另一个类的协助，所以要尽量不使用双向的互相依赖.<br>【代码表现】：局部变量、方法的参数或者对静态方法的调用<br>【箭头及指向】：带箭头的虚线，指向被使用者</p>
<a id="more"></a>
<h2 id="2、关联"><a href="#2、关联" class="headerlink" title="2、关联"></a>2、关联</h2><p>【关联关系】：是一种拥有的关系，它使一个类知道另一个类的属性和方法；如：老师与学生，丈夫与妻子关联可以是双向的，也可以是单向的。双向的关联可以有两个箭头或者没有箭头，单向的关联有一个箭头。<br>【代码体现】：成员变量<br>【箭头及指向】：带普通箭头的实心线，指向被拥有者</p>
<h2 id="3、泛化"><a href="#3、泛化" class="headerlink" title="3、泛化"></a>3、泛化</h2><p>【泛化关系】：是一种继承关系，表示一般与特殊的关系，它指定了子类如何特化父类的所有特征和行为。例如：老虎是动物的一种，即有老虎的特性也有动物的共性。<br>【箭头指向】：带三角箭头的实线，箭头指向父类</p>
<h2 id="4、实现"><a href="#4、实现" class="headerlink" title="4、实现"></a>4、实现</h2><p>【实现关系】：描述是一种类与接口的关系，表示类是接口所有特征和行为的实现.<br>【箭头指向】：带三角箭头的虚线，箭头指向接口</p>
<h2 id="5、聚合"><a href="#5、聚合" class="headerlink" title="5、聚合"></a>5、聚合</h2><p>【聚合关系】：是整体与部分的关系，且部分可以离开整体而单独存在。如车和轮胎是整体和部分的关系，轮胎离开车仍然可以存在。<br>聚合关系是关联关系的一种，是强的关联关系；关联和聚合在语法上无法区分，必须考察具体的逻辑关系。<br>【代码体现】：成员变量<br>【箭头及指向】：带空心菱形的实心线，菱形指向整体<br>小技巧：空心菱形表示聚合，好聚好散，所以生命周期可以不同。</p>
<h2 id="6、组合"><a href="#6、组合" class="headerlink" title="6、组合"></a>6、组合</h2><p>【组合关系】：是整体与部分的关系，但部分不能离开整体而单独存在。如公司和部门是整体和部分的关系，没有公司就不存在部门。<br>组合关系是关联关系的一种，是比聚合关系还要强的关系，它要求普通的聚合关系中代表整体的对象负责代表部分的对象的生命周期。<br>【代码体现】：成员变量<br>【箭头及指向】：带实心菱形的实线，菱形指向整体</p>
<h1 id="二、设计原则"><a href="#二、设计原则" class="headerlink" title="二、设计原则"></a>二、设计原则</h1><h2 id="1、单一职责原则"><a href="#1、单一职责原则" class="headerlink" title="1、单一职责原则"></a>1、单一职责原则</h2><p>类或者接口的职责要单一。</p>
<h2 id="2、接口隔离原则"><a href="#2、接口隔离原则" class="headerlink" title="2、接口隔离原则"></a>2、接口隔离原则</h2><p>客户端不要依赖用不到的接口，应该依赖最小接口。</p>
<h2 id="3、依赖倒转原则"><a href="#3、依赖倒转原则" class="headerlink" title="3、依赖倒转原则"></a>3、依赖倒转原则</h2><p>高层模块不能依赖低层模块，两者都应该依赖于抽象。<br>抽象不应该依赖于细节，细节应该依赖于抽象。<br>依赖倒转的核心思想就是面向接口编程。</p>
<h2 id="4、里氏替换原则"><a href="#4、里氏替换原则" class="headerlink" title="4、里氏替换原则"></a>4、里氏替换原则</h2><p>面向对象继承编程中，父类的实现对子类是一个约束，子类继承一个父类时，如果父类发生变化，所有继承这个父类的子类都要发生变化，如何消除父类变化对子类带来的影响？<br>在使用继承时，子类尽量不要重写父类的方法（所有使用父类的地方要能用子类替换）。<br>继承会让两个类的耦合性增强，在适当的情况下，可以通过聚合、组合、依赖来解决问题。<br>（不要做父子，要做兄弟）</p>
<h2 id="5、开闭原则"><a href="#5、开闭原则" class="headerlink" title="5、开闭原则"></a>5、开闭原则</h2><p>对拓展开放（提供功能的类可以拓展），对修改关闭（使用代码的类最好不要修改）</p>
<h2 id="6、迪米特法则（最小知道原则）"><a href="#6、迪米特法则（最小知道原则）" class="headerlink" title="6、迪米特法则（最小知道原则）"></a>6、迪米特法则（最小知道原则）</h2><p>一个对象应该对其他对象保持最少的了解。<br>直接朋友：类中出现的成员变量，方法参数，方法返回值中的类是直接朋友。<br>非直接朋友：类中出现的局部变量不是直接朋友。</p>
<h2 id="7、合成复用原则"><a href="#7、合成复用原则" class="headerlink" title="7、合成复用原则"></a>7、合成复用原则</h2><p>尽量使用组合/聚合/依赖的方式，不要使用继承。</p>
<h1 id="三、设计模式"><a href="#三、设计模式" class="headerlink" title="三、设计模式"></a>三、设计模式</h1><p>设计模式是对一类问题的通用或者大多数认同的解决方案。不局限于一种语言。</p>
<p>设计模式分为三种类型，共23中模式：</p>
<p>创建型模式：单例模式、抽象工厂模式、原型模式、建造者模式、工厂模式。</p>
<p>结构型模式：适配器模式、桥接模式、装饰模式、组合模式、外观模式、享元模式、代理模式。</p>
<p>行为型模式：模板方法模式、命令模式、访问者模式、迭代器模式、观察者模式、中介者模式、备忘录模式、解释器模式、状态模式、策略模式、职责链模式。</p>
<h2 id="1、创建型模式"><a href="#1、创建型模式" class="headerlink" title="1、创建型模式"></a>1、创建型模式</h2><h3 id="1-1-单例模式"><a href="#1-1-单例模式" class="headerlink" title="1.1 单例模式"></a>1.1 单例模式</h3><p>保证软件系统中对某个类只能存在一个对象实例，并且该类只提供一个取得其对象实例的方法（静态方法）。</p>
<h4 id="1-1-1-饿汉式（静态常量）"><a href="#1-1-1-饿汉式（静态常量）" class="headerlink" title="1.1.1 饿汉式（静态常量）"></a>1.1.1 饿汉式（静态常量）</h4><p>（1）构造器私有化（防止new）</p>
<p>（2）类内部创建对象</p>
<p>（3）向外暴露一个静态的公共方法（getInstance）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 静态常量饿汉式实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>优点：写法简单，类加载时实现实例化，避免了线程同步问题。</p>
<p>缺点：没有达到懒加载的效果，如果从始至终没有使用这个实例，会造成内存浪费。</p>
<h4 id="1-1-2-饿汉式（静态代码块）"><a href="#1-1-2-饿汉式（静态代码块）" class="headerlink" title="1.1.2 饿汉式（静态代码块）"></a>1.1.2 饿汉式（静态代码块）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 静态代码块饿汉式实现</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    private Singleton() &#123;&#125;</span><br><span class="line">    private <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    public <span class="keyword">static</span> Singleton getInstance() &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-1-3-懒汉式（线程不安全）"><a href="#1-1-3-懒汉式（线程不安全）" class="headerlink" title="1.1.3 懒汉式（线程不安全）"></a>1.1.3 懒汉式（线程不安全）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 懒汉式（线程不安全）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>优点：可以实现懒加载，用到的时候才创建实例。</p>
<p>缺点：多线程环境下不能保证只有一个实例，线程不安全，不可用。</p>
<h4 id="1-1-4-懒汉式（线程安全，同步方法）"><a href="#1-1-4-懒汉式（线程安全，同步方法）" class="headerlink" title="1.1.4 懒汉式（线程安全，同步方法）"></a>1.1.4 懒汉式（线程安全，同步方法）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 懒汉式（线程安全 同步方法）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>缺点：效率太低。</p>
<h4 id="1-1-5-懒汉式（双重检查）推荐"><a href="#1-1-5-懒汉式（双重检查）推荐" class="headerlink" title="1.1.5 懒汉式（双重检查）推荐"></a>1.1.5 懒汉式（双重检查）推荐</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 懒汉式（双重检查）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>优点：线程安全，懒加载对象。</p>
<h4 id="1-1-6-懒汉式（静态内部类）推荐"><a href="#1-1-6-懒汉式（静态内部类）推荐" class="headerlink" title="1.1.6 懒汉式（静态内部类）推荐"></a>1.1.6 懒汉式（静态内部类）推荐</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 懒汉式（静态内部类）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> Singleton instance;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonInstance</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonInstance.INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>优点：线程安全，懒加载对象。</p>
<h4 id="1-1-7-懒汉式（枚举）推荐"><a href="#1-1-7-懒汉式（枚举）推荐" class="headerlink" title="1.1.7 懒汉式（枚举）推荐"></a>1.1.7 懒汉式（枚举）推荐</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SinglePattern</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"懒汉式（枚举）"</span>);</span><br><span class="line">        Singleton instance = Singleton.INSTANCE;</span><br><span class="line">        Singleton instance1 = Singleton.INSTANCE;</span><br><span class="line">        System.out.println(instance.equals(instance1));</span><br><span class="line">        System.out.println(instance.hashCode());</span><br><span class="line">        System.out.println(instance1.hashCode());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 懒汉式（枚举）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">enum</span> Singleton &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line"><span class="comment">//    public void method() &#123;</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>优点：利用枚举实现单例模式，能够避免多线程同步问题，还能防止反序列化重新创建新的对象。</p>
<p>单例模式适用在需要频繁创建和销毁的对象，创建对象耗时或者耗费资源，但又经常用到的对象、工具类对象、频繁访问数据库或文件的对象（数据源，session工厂等）。</p>
<h3 id="1-2-工厂模式"><a href="#1-2-工厂模式" class="headerlink" title="1.2 工厂模式"></a>1.2 工厂模式</h3><h4 id="1-2-1-简单工厂模式"><a href="#1-2-1-简单工厂模式" class="headerlink" title="1.2.1 简单工厂模式"></a>1.2.1 简单工厂模式</h4><p>简单工厂模式是由一个工厂对象决定创建哪一种产品类的实例，定义一个创建对象的类，由这个类封装实例化对象的行为。</p>
<h4 id="1-2-2-工厂方法模式"><a href="#1-2-2-工厂方法模式" class="headerlink" title="1.2.2 工厂方法模式"></a>1.2.2 工厂方法模式</h4><p>创建一个创建对象的抽象类，将对象的实例化推迟到子类。</p>
<h4 id="1-2-3-抽象工厂模式"><a href="#1-2-3-抽象工厂模式" class="headerlink" title="1.2.3 抽象工厂模式"></a>1.2.3 抽象工厂模式</h4><p>将对象的创建工厂抽象为两层，抽象工厂和具体的工厂子类，使用的对象由专门的工厂子类创建。</p>
<h3 id="1-3-原型模式"><a href="#1-3-原型模式" class="headerlink" title="1.3 原型模式"></a>1.3 原型模式</h3><p>Java中Object类是所有类的根类，Object提供clone()方法，该方法可以将Java对象复制一份，但是需要实现clone的Java类必须要实现一个接口Cloneable，该接口表示该类能够复制且有复制的能力。</p>
<p>深拷贝实现：重写clone()或者通过对象序列化实现（更推荐）</p>
<h3 id="1-4-建造者模式"><a href="#1-4-建造者模式" class="headerlink" title="1.4 建造者模式"></a>1.4 建造者模式</h3><p>建造者模式是一步一步创建一个复杂的对象。将复杂对象的构建与表示相分离。</p>
<p>建造者的四个角色：</p>
<p>Product（产品角色）：一个具体的产品对象。</p>
<p>Builder（抽象建造者）：创建一个Product对象的各个部件指定的接口/抽象类。</p>
<p>ConcreteBuilder（具体建造者）：实现接口，构建和装配各个部件。</p>
<p>Director（指挥者）：构建一个使用Builder接口的对象，用于创建一个复杂的对象，一是隔离客户与对象的生产过程，二是负责控制产品对象的生产过程。</p>
<h2 id="2、结构型模式"><a href="#2、结构型模式" class="headerlink" title="2、结构型模式"></a>2、结构型模式</h2><h3 id="2-1-适配器模式"><a href="#2-1-适配器模式" class="headerlink" title="2.1 适配器模式"></a>2.1 适配器模式</h3><p>适配器（别名包装器）是将某个类的接口转换成调用端期望的列一个接口表示，主要目的是兼容性。</p>
<p>分为：类适配器，对象适配器，接口适配器。</p>
<h3 id="2-2-桥接模式"><a href="#2-2-桥接模式" class="headerlink" title="2.2 桥接模式"></a>2.2 桥接模式</h3><p>桥接模式将实现与抽象分开，使得二者可以独立变化。桥架模式替代多层继承方案，可以减少子类个数。</p>
<h3 id="2-3-装饰者模式（-）"><a href="#2-3-装饰者模式（-）" class="headerlink" title="2.3 装饰者模式（*）"></a>2.3 装饰者模式（*）</h3><p>装饰者模式将新功能动态的附加到对象上，在对象功能拓展方面比继承更有弹性，符合开闭原则。</p>
<h3 id="2-4-组合模式"><a href="#2-4-组合模式" class="headerlink" title="2.4 组合模式"></a>2.4 组合模式</h3><p>组合模式（部分整体模式）创建了对象组的树形结构。</p>
<h3 id="2-5-外观模式"><a href="#2-5-外观模式" class="headerlink" title="2.5 外观模式"></a>2.5 外观模式</h3><p>外观模式（别名过程模式）隐藏系统的复杂性，并向客户端提供了一个客户端可以访问系统的接口。</p>
<p>这种模式涉及到一个单一的类，该类提供了客户端请求的简化方法和对现有系统类方法的委托调用。</p>
<p>为子系统中的一组接口提供一个一致的界面，外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用。</p>
<h3 id="2-6-享元模式"><a href="#2-6-享元模式" class="headerlink" title="2.6 享元模式"></a>2.6 享元模式</h3><p>享元模式（Flyweight Pattern）主要用于减少创建对象的数量，以减少内存占用和提高性能。这种类型的设计模式属于结构型模式，它提供了减少对象数量从而改善应用所需的对象结构的方式。</p>
<p>享元模式尝试重用现有的同类对象，如果未找到匹配的对象，则创建新对象。</p>
<p>运用共享技术有效地支持大量细粒度的对象。</p>
<h4 id="2-6-1-应用场景："><a href="#2-6-1-应用场景：" class="headerlink" title="2.6.1 应用场景："></a>2.6.1 应用场景：</h4><p>1、Java中的String，如果有则返回，如果没有则创建一个字符串保存在字符串缓存池里面；</p>
<p>2、数据库的数据池。</p>
<h3 id="2-7-代理模式"><a href="#2-7-代理模式" class="headerlink" title="2.7 代理模式"></a>2.7 代理模式</h3><p>在代理模式（Proxy Pattern）中，一个类代表另一个类的功能。</p>
<p>在代理模式中，我们创建具有现有对象的对象，以便向外界提供功能接口。</p>
<p>为其他对象提供一种代理以控制对这个对象的访问。</p>
<h4 id="2-7-1-应用场景"><a href="#2-7-1-应用场景" class="headerlink" title="2.7.1 应用场景"></a>2.7.1 应用场景</h4><p>1、Windows里面的快捷方式；</p>
<p>2、买火车票不一定在火车站买，也可以去代售点；</p>
<p>3、一张支票或银行存单是账户中资金的代理。支票在市场交易中用来代替现金，并提供对签发人账号上资金的控制；</p>
<p>4、Spring AOP。</p>
<h4 id="2-7-2-注意事项"><a href="#2-7-2-注意事项" class="headerlink" title="2.7.2 注意事项"></a>2.7.2 注意事项</h4><p>1、和适配器模式的区别：适配器模式主要改变所考虑对象的接口，而代理模式不能改变所代理类的接口。</p>
<p>2、和装饰器模式的区别：装饰器模式为了增强功能，而代理模式是为了加以控制。</p>
<h2 id="3、行为型模式"><a href="#3、行为型模式" class="headerlink" title="3、行为型模式"></a>3、行为型模式</h2><h3 id="3-1-模板方法模式"><a href="#3-1-模板方法模式" class="headerlink" title="3.1 模板方法模式"></a>3.1 模板方法模式</h3><p>在模板模式（Template Pattern）中，一个抽象类公开定义了执行它的方法的方式/模板。它的子类可以按需要重写方法实现，但调用将以抽象类中定义的方式进行。</p>
<p>定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</p>
<h4 id="3-1-1-应用场景"><a href="#3-1-1-应用场景" class="headerlink" title="3.1.1 应用场景"></a>3.1.1 应用场景</h4><p>1、在造房子的时候，地基、走线、水管都一样，只有在建筑的后期才有加壁橱加栅栏等差异；</p>
<p>2、西游记里面菩萨定好的81难，这就是一个顶层的逻辑骨架；</p>
<p>3、spring中对Hibernate的支持，将一些已经定好的方法封装起来，比如开启事务、获取Session、关闭Session等，程序员不重复写那些已经规范好的代码，直接丢一个实体就可以保存。</p>
<h3 id="3-2-命令模式"><a href="#3-2-命令模式" class="headerlink" title="3.2 命令模式"></a>3.2 命令模式</h3><p>命令模式（Command Pattern）是一种数据驱动的设计模式。请求以命令的形式包裹在对象中，并传给调用对象。调用对象寻找可以处理该命令的合适的对象，并把该命令传给相应的对象，该对象执行命令。</p>
<p>将一个请求封装成一个对象，从而使您可以用不同的请求对客户进行参数化。</p>
<h4 id="3-2-1-应用场景"><a href="#3-2-1-应用场景" class="headerlink" title="3.2.1 应用场景"></a>3.2.1 应用场景</h4><p>电视机是请求的接收者，遥控器是请求的发送者，遥控器上有一些按钮，不同的按钮对应电视机的不同操作。抽象命令角色由一个命令接口来扮演，有三个具体的命令类实现了抽象命令接口，这三个具体命令类分别代表三种操作：打开电视机、关闭电视机和切换频道。</p>
<h3 id="3-3-访问者模式"><a href="#3-3-访问者模式" class="headerlink" title="3.3 访问者模式"></a>3.3 访问者模式</h3><p>在访问者模式（Visitor Pattern）中，我们使用了一个访问者类，它改变了元素类的执行算法。通过这种方式，元素的执行算法可以随着访问者改变而改变。根据模式，元素对象已接受访问者对象，这样访问者对象就可以处理元素对象上的操作。</p>
<p>主要将数据结构与数据操作分离。</p>
<p>主要解决：稳定的数据结构和易变的操作耦合问题。</p>
<h3 id="3-4-迭代器模式"><a href="#3-4-迭代器模式" class="headerlink" title="3.4 迭代器模式"></a>3.4 迭代器模式</h3><p>迭代器模式（Iterator Pattern）是Java和.Net编程环境中非常常用的设计模式。这种模式用于顺序访问集合对象的元素，不需要知道集合对象的底层表示。</p>
<p>迭代器模式属于行为型模式。</p>
<p>提供一种方法顺序访问一个聚合对象中各个元素，而又无须暴露该对象的内部表示。</p>
<h3 id="3-5-观察者模式"><a href="#3-5-观察者模式" class="headerlink" title="3.5 观察者模式"></a>3.5 观察者模式</h3><p>当对象间存在一对多关系时，则使用观察者模式（ObserverPattern）。比如，当一个对象被修改时，则会自动通知它的依赖对象。</p>
<p>定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。</p>
<h4 id="3-5-1-应用场景"><a href="#3-5-1-应用场景" class="headerlink" title="3.5.1 应用场景"></a>3.5.1 应用场景</h4><p>1、拍卖的时候，拍卖师观察最高标价，然后通知给其他竞价者竞价；</p>
<h3 id="3-6-中介者模式"><a href="#3-6-中介者模式" class="headerlink" title="3.6 中介者模式"></a>3.6 中介者模式</h3><p>中介者模式（Mediator Pattern）是用来降低多个对象和类之间的通信复杂性。这种模式提供了一个中介类，该类通常处理不同类之间的通信，并支持松耦合，使代码易于维护。</p>
<p>用一个中介对象来封装一系列的对象交互，中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互。</p>
<h4 id="3-6-1-应用场景"><a href="#3-6-1-应用场景" class="headerlink" title="3.6.1 应用场景"></a>3.6.1 应用场景</h4><p>1、中国加入WTO之前是各个国家相互贸易，结构复杂，现在是各个国家通过WTO来互相贸易；</p>
<p>2、机场调度系统；</p>
<p>3、MVC框架，其中C（控制器）就是M（模型）和V（视图）的中介者。</p>
<h3 id="3-7-备忘录模式"><a href="#3-7-备忘录模式" class="headerlink" title="3.7 备忘录模式"></a>3.7 备忘录模式</h3><p>备忘录模式（Memento Pattern）保存一个对象的某个状态，以便在适当的时候恢复对象。</p>
<p>在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。</p>
<h4 id="3-7-1-应用场景"><a href="#3-7-1-应用场景" class="headerlink" title="3.7.1 应用场景"></a>3.7.1 应用场景</h4><p>1、后悔药；</p>
<p>2、打游戏时的存档；</p>
<p>3、Windows里的ctri+z；</p>
<p>4、IE中的后退；</p>
<p>5、数据库的事务管理。</p>
<h3 id="3-8-解释器模式"><a href="#3-8-解释器模式" class="headerlink" title="3.8 解释器模式"></a>3.8 解释器模式</h3><p>解释器模式（Interpreter Pattern）提供了评估语言的语法或表达式的方式。这种模式实现了一个表达式接口，该接口解释一个特定的上下文。这种模式被用在SQL解析、符号处理引擎等。</p>
<p>给定一个语言，定义它的文法表示，并定义一个解释器，这个解释器使用该标识来解释语言中的句子。</p>
<h4 id="3-8-1-应用场景"><a href="#3-8-1-应用场景" class="headerlink" title="3.8.1 应用场景"></a>3.8.1 应用场景</h4><p>编译器、运算表达式计算。</p>
<h3 id="3-9-状态模式"><a href="#3-9-状态模式" class="headerlink" title="3.9 状态模式"></a>3.9 状态模式</h3><p>在状态模式（State Pattern）中，类的行为是基于它的状态改变的。</p>
<p>在状态模式中，我们创建表示各种状态的对象和一个行为随着状态对象改变而改变的context对象。</p>
<p>允许对象在内部状态发生改变时改变它的行为，对象看起来好像修改了它的类。</p>
<h3 id="3-10-策略模式"><a href="#3-10-策略模式" class="headerlink" title="3.10 策略模式"></a>3.10 策略模式</h3><p>在策略模式（Strategy Pattern）中，一个类的行为或其算法可以在运行时更改。</p>
<p>在策略模式中，我们创建表示各种策略的对象和一个行为随着策略对象改变而改变的context对象。策略对象改变context对象的执行算法。</p>
<p>定义一系列的算法，把它们一个个封装起来，并且使它们可相互替换。</p>
<h4 id="3-10-1-应用场景"><a href="#3-10-1-应用场景" class="headerlink" title="3.10.1 应用场景"></a>3.10.1 应用场景</h4><p>1、诸葛亮的锦囊妙计，每一个锦囊就是一个策略；</p>
<p>2、旅行的出游方式，选择骑自行车、坐汽车，每一种旅行方式都是一个策略。</p>
<h3 id="3-11-职责链模式"><a href="#3-11-职责链模式" class="headerlink" title="3.11 职责链模式"></a>3.11 职责链模式</h3><p>顾名思义，责任链模式（Chain of Responsibility Pattern）为请求创建了一个接收者对象的链。这种模式给予请求的类型，对请求的发送者和接收者进行解耦。</p>
<p>在这种模式中，通常每个接收者都包含对另一个接收者的引用。如果一个对象不能处理该请求，那么它会把相同的请求传给下一个接收者，依此类推。</p>
<p>避免请求发送者与接收者耦合在一起，让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止。</p>
<h4 id="3-11-1-应用场景"><a href="#3-11-1-应用场景" class="headerlink" title="3.11.1 应用场景"></a>3.11.1 应用场景</h4><p>企业中的报销审批，小于1000组长审批，小于1W三级部长审批，小于10W二级部长审批。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">wnxy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://wnxy.xyz/2024/01/07/Design_pattern_study_notes/">https://wnxy.xyz/2024/01/07/Design_pattern_study_notes/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><a class="post-meta__tags" href="/tags/UML%E7%B1%BB%E5%9B%BE/">UML类图</a><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/">设计原则</a></div><div class="social-share pull-right"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="next-post pull-right"><a href="/2023/04/04/Qt_and_cpp_implementation_TODO/"><span>如何使用Qt+C++撸一个待办事项提醒软件？</span><i class="fa fa-chevron-right"></i></a></div></nav><div class="post-adv"></div><span class="post-meta__comment">注：本站配置Disqus和Valine双评论系统，可选其中之一使用！🧐🧐🧐</span><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://wnxy.xyz/2024/01/07/Design_pattern_study_notes/';
  this.page.identifier = '2024/01/07/Design_pattern_study_notes/';
  this.page.title = '设计模式（Java为例）学习笔记';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'wnxy' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://wnxy.disqus.com/count.js" async></script><div id="vcomment"></div><!--script(src='https://cdn1.lncld.net/static/js/3.0.4/av-min.js')  --><script src="https://code.bdstatic.com/npm/leancloud-storage@4.12.2/dist/av-min.js"></script><!--script(src='https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js')--><script src="https://fastly.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'kVUI0yw32bG82ATvDNLwSl1d-MdYXbMMI',
  appKey:'QrR6ONijw9qpWMGouvtT276X',
  placeholder:'来都来了，不说点啥嘛(*≧▽≦)ﾉｼ))',
  avatar:'wavatar',
  guest_info:guest_info,
  pageSize:'10',
  lang: 'zh-CN',
  serverURLs: 'https://kvui0yw3.api.lncldglobal.com',  // 国际版Valine评论失效，增加这一行！！！

  master: ' 5a251b4c3b2b67d108a284c9b0b94706',   //博主邮箱md5
  tagMeta: ["博主","小伙伴","访客"],     //标识字段名
  friends:  ["af67fe681d518972c1e5ff2146b4bfb6","f37e64a613264d5dc895548c262a85b2"],  //小伙伴邮箱Md5

  // 设置Bilibili表情包地址
  emojiCDN: 'https://valinecdn.bili33.top/', 
  // 表情title和图片映射
  emojiMaps: {
      "alu2": "alu/不出所料.png",
      "alu3": "alu/不说话.png",
      "alu4": "alu/不高兴.png",
      "alu5": "alu/中刀.png",
      "alu6": "alu/中指.png",
      "alu7": "alu/中枪.png",
      "alu8": "alu/亲亲.png",
      "alu9": "alu/便便.png",
      "alu10": "alu/内伤.png",
      "alu11": "alu/击掌.png",
      "alu12": "alu/口水.png",
      "alu13": "alu/吐.png",
      "alu14": "alu/吐舌.png",
      "alu15": "alu/吐血倒地.png",
      "alu16": "alu/呲牙.png",
      "alu17": "alu/咽气.png",
      "alu18": "alu/哭泣.png",
      "alu19": "alu/喜极而泣.png",
      "alu20": "alu/喷水.png",
      "alu21": "alu/喷血.png",
      "alu22": "alu/坐等.png",
      "alu23": "alu/害羞.png",
      "alu24": "alu/小眼睛.png",
      "alu25": "alu/尴尬.png",
      "alu26": "alu/得意.png",
      "alu27": "alu/惊喜.png",
      "alu28": "alu/想一想.png",
      "alu29": "alu/愤怒.png",
      "alu30": "alu/扇耳光.png",
      "alu31": "alu/投降.png",
      "alu32": "alu/抠鼻.png",
      "alu33": "alu/抽烟.png",
      "alu34": "alu/无奈.png",
      "alu35": "alu/无所谓.png",
      "alu36": "alu/无语.png",
      "alu37": "alu/暗地观察.png",
      "alu38": "alu/期待.png",
      "alu39": "alu/欢呼.png",
      "alu40": "alu/汗.png",
      "alu41": "alu/深思.png",
      "alu42": "alu/狂汗.png",
      "alu43": "alu/献花.png",
      "alu44": "alu/献黄瓜.png",
      "alu45": "alu/皱眉.png",
      "alu46": "alu/看不见.png",
      "alu47": "alu/看热闹.png",
      "alu48": "alu/瞅你.png",
      "alu49": "alu/肿包.png",
      "alu50": "alu/脸红.png",
      "alu51": "alu/蜡烛.png",
      "alu52": "alu/装大款.png",
      "alu53": "alu/观察.png",
      "alu54": "alu/赞一个.png",
      "alu55": "alu/邪恶.png",
      "alu56": "alu/锁眉.png",
      "alu57": "alu/长草.png",
      "alu58": "alu/阴暗.png",
      "alu59": "alu/高兴.png",
      "alu60": "alu/黑线.png",
      "alu61": "alu/鼓掌.png",
      "Little-Bad2": "Little-Bad/一群坏坏.jpg",
      "Little-Bad3": "Little-Bad/中坏坏.jpg",
      "Little-Bad4": "Little-Bad/发火的坏坏.jpg",
      "Little-Bad5": "Little-Bad/坏坏坏.jpg",
      "Little-Bad6": "Little-Bad/大坏坏.jpg",
      "Little-Bad7": "Little-Bad/天使一般的坏坏.jpg",
      "Little-Bad8": "Little-Bad/害羞坏.jpg",
      "Little-Bad9": "Little-Bad/小坏蛋.jpg",
      "Little-Bad10": "Little-Bad/我们一起做坏坏的事.jpg",
      "Little-Bad11": "Little-Bad/敲板子的坏坏.gif",
      "Little-Bad12": "Little-Bad/比地球还大的坏坏.jpg",
      "Little-Bad13": "Little-Bad/流泪的坏坏.jpg",
      "Little-Bad14": "Little-Bad/热炸的坏坏.jpg",
      "aodamiao1": "aodamiao/01.gif",
      "aodamiao2": "aodamiao/02.gif",
      "aodamiao3": "aodamiao/03.gif",
      "aodamiao4": "aodamiao/04.gif",
      "aodamiao5": "aodamiao/05.gif",
      "aodamiao6": "aodamiao/06.gif",
      "aodamiao7": "aodamiao/07.gif",
      "aodamiao8": "aodamiao/08.gif",
      "aodamiao9": "aodamiao/09.gif",
      "aodamiao10": "aodamiao/10.gif",
      "aodamiao11": "aodamiao/11.gif",
      "aodamiao12": "aodamiao/12.gif",
      "aodamiao13": "aodamiao/13.gif",
      "aodamiao14": "aodamiao/14.gif",
      "aodamiao15": "aodamiao/15.gif",
      "aodamiao16": "aodamiao/16.gif",
      "aodamiao17": "aodamiao/17.gif",
      "aodamiao18": "aodamiao/18.gif",
      "aodamiao19": "aodamiao/19.gif",
      "aodamiao20": "aodamiao/20.gif",
      "aodamiao21": "aodamiao/21.gif",
      "aodamiao22": "aodamiao/22.gif",
      "aodamiao23": "aodamiao/23.gif",
      "aodamiao24": "aodamiao/24.gif",
      "aodamiao25": "aodamiao/25.gif",
      "aodamiao26": "aodamiao/26.gif",
      "aodamiao27": "aodamiao/27.gif",
      "aodamiao28": "aodamiao/28.gif",
      "aodamiao29": "aodamiao/29.gif",
      "aodamiao30": "aodamiao/30.gif",
      "aodamiao31": "aodamiao/31.gif",
      "aodamiao32": "aodamiao/32.gif",
      "aodamiao33": "aodamiao/33.gif",
      "aodamiao34": "aodamiao/34.gif",
      "aodamiao35": "aodamiao/35.gif",
      "aodamiao36": "aodamiao/36.gif",
      "aodamiao37": "aodamiao/37.gif",
      "aodamiao38": "aodamiao/38.gif",
      "aodamiao39": "aodamiao/39.gif",
      "aodamiao40": "aodamiao/40.gif",
      "Yurui-Neko1": "Yurui-Neko/001.png",
      "Yurui-Neko2": "Yurui-Neko/002.png",
      "Yurui-Neko3": "Yurui-Neko/003.png",
      "Yurui-Neko4": "Yurui-Neko/004.png",
      "Yurui-Neko5": "Yurui-Neko/005.png",
      "Yurui-Neko6": "Yurui-Neko/006.png",
      "Yurui-Neko7": "Yurui-Neko/007.png",
      "Yurui-Neko8": "Yurui-Neko/008.png",
      "Yurui-Neko9": "Yurui-Neko/009.png",
      "Yurui-Neko10": "Yurui-Neko/010.png",
      "Yurui-Neko11": "Yurui-Neko/011.png",
      "Yurui-Neko12": "Yurui-Neko/012.png",
      "Yurui-Neko13": "Yurui-Neko/013.png",
      "Yurui-Neko14": "Yurui-Neko/014.png",
      "Yurui-Neko15": "Yurui-Neko/015.png",
      "Yurui-Neko16": "Yurui-Neko/016.png",
      "Yurui-Neko17": "Yurui-Neko/017.png",
      "Yurui-Neko18": "Yurui-Neko/018.png",
      "Yurui-Neko19": "Yurui-Neko/019.png",
      "Yurui-Neko20": "Yurui-Neko/020.png",
      "Yurui-Neko21": "Yurui-Neko/021.png",
      "Yurui-Neko22": "Yurui-Neko/022.png",
      "Yurui-Neko23": "Yurui-Neko/023.png",
      "Yurui-Neko24": "Yurui-Neko/024.png",
      "Yurui-Neko25": "Yurui-Neko/025.png",
      "Yurui-Neko26": "Yurui-Neko/026.png",
      "Yurui-Neko27": "Yurui-Neko/027.png",
      "Yurui-Neko28": "Yurui-Neko/028.png",
      "Yurui-Neko29": "Yurui-Neko/029.png",
      "Yurui-Neko30": "Yurui-Neko/030.png",
      "Yurui-Neko31": "Yurui-Neko/031.png",
      "Yurui-Neko32": "Yurui-Neko/032.png",
      "Yurui-Neko33": "Yurui-Neko/033.png",
      "Yurui-Neko34": "Yurui-Neko/034.png",
      "Yurui-Neko35": "Yurui-Neko/035.png",
      "Yurui-Neko36": "Yurui-Neko/036.png",
      "Yurui-Neko37": "Yurui-Neko/037.png",
      "Yurui-Neko38": "Yurui-Neko/038.png",
      "Yurui-Neko39": "Yurui-Neko/039.png",
      "Yurui-Neko40": "Yurui-Neko/040.png"
    }
})</script></div></div><footer class="footer-bg" style="background-image: url(https://img.xjh.me/random_img.php?type=bg&amp;ctype=nature&amp;return=302)"><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2024 By wnxy</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://unpkg.com/animejs@latest/anime.min.js"></script><script src="https://unpkg.com/jquery@latest/dist/jquery.min.js"></script><script src="https://unpkg.com/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://unpkg.com/velocity-animate@latest/velocity.min.js"></script><script src="https://unpkg.com/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  CommonHTML: {
    linebreaks: { automatic: true, width: "90% container" }
  },
  "HTML-CSS": { 
    linebreaks: { automatic: true, width: "90% container" }
  },
  "SVG": { 
    linebreaks: { automatic: true, width: "90% container" }
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://unpkg.com/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script type="text/javascript" src="/js/crash_cheat.js"></script><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var i=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){i&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var a=0;a<r.length;a++)t=r[a],0<=(e=t.getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}();var t,e}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>